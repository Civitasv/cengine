# 渲染相关

在屏幕上绘制图形。

## Two Sides

### Render API (API/platform specific), We use OpenGL, Vulkan, or other Render library to do it

#### Render Context

#### Swap chain

Swap Chain（交换链）是计算机图形学中用于实现双缓冲技术的一种机制。在图形渲染中，由于渲染结果需要在屏幕上显示，因此需要将渲染结果与屏幕上的显示内容进行交换。为了避免交换时产生闪烁或撕裂等不良现象，通常使用双缓冲技术来进行渲染。

双缓冲技术通过使用两个缓冲区来实现渲染和显示的分离。其中一个缓冲区用于渲染图形，称为前缓冲区，而另一个缓冲区则用于屏幕上的显示，称为后缓冲区。当渲染完成后，将前缓冲区和后缓冲区进行交换，使渲染结果显示在屏幕上。

而Swap Chain就是实现双缓冲技术的关键机制。它提供了一组缓冲区来存储渲染结果，并且可以在渲染完成后将前缓冲区和后缓冲区进行交换。Swap Chain通常由显示驱动程序实现，可以通过图形API（如OpenGL、Direct3D等）来创建和管理。

在使用Swap Chain时，需要注意缓冲区的数量和格式，以及交换缓冲区的时机等。一般来说，Swap Chain的缓冲区数量应该足够大，以便在进行渲染时可以避免频繁的缓冲区切换。同时，交换缓冲区的时机应该选择合适的时机，以避免产生闪烁或撕裂等不良现象。

总之，Swap Chain是计算机图形学中用于实现双缓冲技术的一种机制，它提供了一组缓冲区来存储渲染结果，并且可以在渲染完成后将前缓冲区和后缓冲区进行交换，以实现渲染和显示的分离，从而避免产生不良现象。

#### Frame buffer

#### Vertex buffer

#### Index buffer

#### Texture

#### Shader

#### States

在计算机图形学中，State（状态）是指控制渲染管线的各种参数和设置，包括但不限于材质、纹理、混合模式、深度测试等。这些状态在渲染过程中决定了渲染管线的行为和输出结果，因此对于实现高质量的图形渲染和优化渲染性能非常重要。

States可以分为两类：全局状态和对象状态。

A. 全局状态

全局状态是影响整个渲染管线的状态，如背面剔除（Back Face Culling）、深度测试（Depth Testing）等，它们对所有的渲染对象都有效。全局状态可以通过OpenGL提供的状态设置函数进行设置，这些函数可以影响OpenGL的全局状态，例如glEnable和glDisable函数用于启用和禁用OpenGL的特定功能，glDepthFunc函数用于设置深度测试的比较函数等。

B. 对象状态

对象状态是指渲染管线中的每个对象（例如网格、材质、纹理等）所拥有的状态，例如物体的位置、颜色、纹理等。这些状态通常被存储在渲染对象的属性中，并可以通过OpenGL提供的函数进行设置和修改。例如，通过glBindTexture函数可以将一个纹理对象绑定到渲染管线上，通过glTexParameter函数可以设置纹理的一些属性等。

总之，States是OpenGL中控制渲染管线的各种参数和设置，包括全局状态和对象状态，这些状态的设置和调整可以影响OpenGL的渲染结果和性能。开发者需要根据具体的渲染需求来设置和优化States，以达到更好的渲染效果和性能。

#### Pipelines

在计算机图形学中，Pipeline（管道）是指将渲染过程分成多个阶段，每个阶段负责一定的功能，通过流水线的方式依次处理，最终将渲染结果输出到屏幕上的过程。

渲染管道通常包括多个阶段，例如：

1. 应用程序阶段：从应用程序中获取场景数据，并进行一些基本的数据处理和准备工作。
2. 几何阶段：将场景中的三维物体转换成屏幕上的二维坐标，包括变换、裁剪和投影等过程。
3. 光栅化阶段：将三角形网格转换成像素，并计算每个像素的颜色和深度等属性。
4. 像素处理阶段：对每个像素进行颜色和深度等属性的计算和处理。
5. 输出阶段：将最终的渲染结果输出到屏幕上。

渲染管道可以根据需要进行不同的配置和扩展，例如添加特定的渲染技术、优化性能等。

在游戏开发中，渲染管道通常是游戏引擎的核心之一，不同的引擎会采用不同的渲染管道，例如Unity引擎采用的是可编程渲染管道（SRP），而Unreal引擎采用的是基于DirectX和OpenGL的传统渲染管道。

总之，渲染管道是计算机图形学中的重要概念，它将渲染过程分成多个阶段，通过流水线的方式依次处理，最终将渲染结果输出到屏幕上，为游戏开发提供了重要的技术基础。

#### Render passes

Render Passes（渲染通道）是指在渲染过程中，将场景渲染成多个不同的通道或层，以便在后续的处理中进行更加精细和灵活的控制和调整。

通常情况下，一个场景的渲染可以被分成多个Passes，每个Passes渲染出一个特定的层或通道，例如深度通道、法线通道、颜色通道等。每个Passes可以使用不同的渲染设置、材质、灯光、相机等，以便在后续的处理中进行不同的控制和调整。

Render Passes的使用可以带来多个优势，例如：

1. 灵活性：通过Render Passes，可以将场景渲染成多个层或通道，方便在后续的处理中进行精细和灵活的控制和调整。
2. 性能：通过Render Passes，可以避免不必要的渲染和处理，从而提高渲染性能。
3. 可定制性：通过Render Passes，可以为每个通道或层设置不同的渲染设置、材质、灯光、相机等，以便实现不同的视觉效果。

在游戏中，Render Passes通常用于实现各种视觉效果，例如深度图、阴影图、反射、抗锯齿等。通过Render Passes，可以实现更加精细和灵活的效果控制和调整，提高游戏画面的质量和表现力。

总之，Render Passes是一种在渲染过程中实现多层次渲染的技术，可以提高渲染效率和画面质量，同时也为后续处理提供了更加灵活和精细的控制和调整方式。

### Renderer(API/platform agnostic), This should use the Render API

> 2D & 3D Renderer, Forward, deferred, etc

#### Scene Graph

场景图，用于组织和存储游戏场景中的对象及其之间的关系，通常是一颗树形结构，每个节点代表一个对象，而每个节点的父节点表示该节点所代表的对象的容器。Scene Graph 可以跟踪场景中所有的对象，包括摄像机、灯光、几何图形和其他可视化元素。在实时渲染中，Scene Graph 可以被用于优化渲染流程，通过以一种层次结构的方式来表示对象之间的关系，从而减少需要绘制的元素数量。例如，当移动一个对象时，Scene Graph 可以追踪到该对象的位置变化，并相应地更新其子节点的位置和方向。总之，Scene Graph 是游戏引擎中非常重要的概念，它使得游戏引擎可以高效地管理和渲染场景中的对象，从而为游戏开发人员提供了一种强大的工具来实现各种复杂的效果。

#### Sorting

排序，用于优化性能，对要渲染的物体进行排序，使得渲染管线能够更高效的处理物体之间的遮挡和透明度等关系，从而减少不必要的渲染操作，提高渲染性能

#### Culling

剔除，用于优化性能，基本思想是，在渲染之前，通过一系列的测试来决定哪些物体应该被渲染，而哪些物体应该被剔除，这些测试可以是根据视锥体或其他标准，例如距离、对象可见性、遮挡等

#### Materials

#### LOD

Level of Detail，细节层次，用于优化性能和减少渲染负担，它的基本思想是根据对象和相机的距离，动态的调整对象的细节程度，从而保证场景在远距离观察时有较好的性能表现，同时在近距离观察时有更高的细节和质量。LOD 的实现方式通常是将不同细节级别的模型制作出来，然后在运行时动态地选择合适的细节级别，当玩家离某个物体较远时，游戏引擎会自动切换到较低细节级别的模型，减少需要渲染的面数和纹理数量，从而提高性能，当玩家逐渐接近该物体时，游戏引擎会切换到更高级别的模型，使物体看起来更加真实

#### Animations

#### Camera

#### VFX: visual effects

VFX是Visual Effects（视觉特效）的缩写，是指在电影、电视、游戏和广告等媒体中使用的各种视觉效果技术和技巧，用于增强和改善画面效果和观感。

VFX技术包括很多不同的技术领域，例如：

1. 3D建模和动画：创建虚拟的三维场景和物体，并进行动画制作。
2. 视频合成：将不同的视频、图片、3D场景和特效元素合成到一起，形成一个完整的画面。
3. 特效制作：使用各种技术制作特效，如爆炸、火焰、雨、雪等。
4. 色彩校正和调整：对影像进行后期处理，调整颜色、亮度、对比度等参数，以达到特定的效果。
5. 摄影模拟：模拟不同的摄影技巧，如景深、快门角度、手持摄影等，以达到特定的效果。

在游戏中，VFX技术也被广泛使用，用于增强游戏场景和角色的视觉效果。例如，游戏中常用的爆炸特效、魔法特效、雨雪天气特效等，都需要使用VFX技术来制作和实现。同时，VFX技术也可以用于优化游戏性能，例如，使用粒子特效来代替复杂的几何体，从而减少渲染负担，提高游戏的帧率。

总之，VFX技术在影视和游戏制作中都是非常重要的，它可以让作品更加生动、真实、吸引人，也可以用于优化性能和提升游戏体验。

#### PostFX: post effects

PostFX（后期特效）是指在影视、游戏等媒体中，通过对渲染结果进行后期处理，增强画面的质感和氛围，达到特定的效果。PostFX技术通常用于在渲染流程结束后对图像进行处理，包括调整颜色、亮度、对比度、模糊、扭曲、边缘检测等，以实现不同的视觉效果。

在游戏中，PostFX技术可以用于增强游戏场景和角色的视觉效果，例如模糊效果、景深效果、HDR效果、色调映射效果等。这些效果可以让游戏画面更加逼真、有质感，提高游戏的沉浸感和真实感。

PostFX技术的实现方式有多种，其中常用的方式包括：

1. Shader：使用Shader对渲染结果进行处理，可以实现各种效果。
2. Render Texture：将渲染结果渲染到纹理中，然后对纹理进行后期处理。
3. Post Processing Stack：Unity引擎提供的Post Processing Stack，可以方便地添加、调整和组合多种后期处理效果。

总之，PostFX技术在游戏开发中非常重要，可以增强游戏画面的质感和氛围，提高游戏的沉浸感和真实感。在实现过程中，需要仔细考虑效果的选择、调整和性能优化等问题。

#### Other things (eg. reflecions, ambient occlusion)
